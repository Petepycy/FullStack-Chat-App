{"ast":null,"code":"import { ChatMessageDto } from \"../models/chatMessageDto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/chat-service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nfunction ChatComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 24)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const chatMessage_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", chatMessage_r3.name, \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", chatMessage_r3.message, \" \");\n  }\n}\nexport class ChatComponent {\n  constructor(chatService) {\n    this.chatService = chatService;\n    this.chatMessages = [];\n    this.selectedFile = null;\n  }\n  sendMessage(sendForm) {\n    const name = sendForm.value.user;\n    const message = sendForm.value.message;\n    const photo = '';\n    const chatMessageDto = new ChatMessageDto(name, message, photo);\n    this.chatService.sendMessage(chatMessageDto).subscribe(() => {\n      sendForm.controls['message'].reset();\n    });\n  }\n  ngOnInit() {\n    this.chatService.getChatMessagesPolling(5000).subscribe(messages => {\n      this.chatMessages = messages;\n    });\n  }\n  ngOnDestroy() {\n    // No need to close anything for REST API communication\n  }\n  onFileSelected(event) {\n    setTimeout(() => {\n      this.selectedFile = event.target.files[0];\n      console.log(\"File selected:\", this.selectedFile);\n    }, 500);\n  }\n}\nChatComponent.ɵfac = function ChatComponent_Factory(t) {\n  return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n};\nChatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatComponent,\n  selectors: [[\"cf-chat\"]],\n  decls: 30,\n  vars: 1,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [1, \"container-fluid\"], [\"href\", \"#\", 1, \"navbar-brand\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarNav\", \"aria-controls\", \"navbarNav\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNav\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\"], [1, \"nav-item\"], [\"routerLink\", \"/login\", 1, \"nav-link\"], [1, \"chat\"], [1, \"container\"], [1, \"chat-content\"], [1, \"card\"], [1, \"list-group\", \"list-group-flush\"], [\"messageList\", \"\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngSubmit\"], [\"sendForm\", \"ngForm\"], [1, \"chat-send\", \"row\"], [1, \"col-2\"], [\"type\", \"text\", \"name\", \"user\", \"id\", \"input-user\", \"ngModel\", \"\", 1, \"form-control\"], [1, \"col-8\"], [\"type\", \"text\", \"name\", \"message\", \"id\", \"input-message\", \"ngModel\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"list-group-item\"]],\n  template: function ChatComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r4 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"header\")(1, \"nav\", 0)(2, \"div\", 1)(3, \"a\", 2);\n      i0.ɵɵtext(4, \"My App\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵelement(6, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"ul\", 6)(9, \"li\", 7)(10, \"a\", 8);\n      i0.ɵɵtext(11, \"Login\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelement(12, \"router-outlet\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"main\", 9)(14, \"div\", 10)(15, \"div\", 11)(16, \"div\", 12)(17, \"ul\", 13, 14);\n      i0.ɵɵtemplate(19, ChatComponent_li_19_Template, 5, 2, \"li\", 15);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"form\", 16, 17);\n      i0.ɵɵlistener(\"ngSubmit\", function ChatComponent_Template_form_ngSubmit_20_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r2 = i0.ɵɵreference(21);\n        return i0.ɵɵresetView(ctx.sendMessage(_r2));\n      });\n      i0.ɵɵelementStart(22, \"div\", 18)(23, \"div\", 19);\n      i0.ɵɵelement(24, \"input\", 20);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 21);\n      i0.ɵɵelement(26, \"input\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 19)(28, \"button\", 23);\n      i0.ɵɵtext(29, \"Send\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.chatMessages);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm, i4.RouterOutlet, i4.RouterLink],\n  styles: [\".chat[_ngcontent-%COMP%] {\\r\\n  margin-top: 10rem;\\r\\n}\\r\\n\\r\\ndiv.chat-content[_ngcontent-%COMP%] {\\r\\n  border-radius: .25rem;\\r\\n  height: 40rem;\\r\\n  margin-bottom: 2rem;\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n  height: 100%;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2hhdC9jaGF0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsYUFBYTtFQUNiLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7QUFDZCIsInNvdXJjZXNDb250ZW50IjpbIi5jaGF0IHtcclxuICBtYXJnaW4tdG9wOiAxMHJlbTtcclxufVxyXG5cclxuZGl2LmNoYXQtY29udGVudCB7XHJcbiAgYm9yZGVyLXJhZGl1czogLjI1cmVtO1xyXG4gIGhlaWdodDogNDByZW07XHJcbiAgbWFyZ2luLWJvdHRvbTogMnJlbTtcclxufVxyXG5cclxuLmNhcmQge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"AAGA,SAAQA,cAAc,QAAO,0BAA0B;;;;;;;;ICqB7CC,8BAAqE;IAEjEA,YACF;IAAAA,iBAAS;IACTA,4BAAM;IACJA,YACF;IAAAA,iBAAO;;;;IAJLA,eACF;IADEA,qDACF;IAEEA,eACF;IADEA,uDACF;;;ADpBZ,OAAM,MAAOC,aAAa;EAKxBC,YAAoBC,WAAwB;IAAxB,gBAAW,GAAXA,WAAW;IAH/B,iBAAY,GAAqB,EAAE;IACnC,iBAAY,GAAgB,IAAI;EAEe;EAE/CC,WAAW,CAACC,QAAgB;IAC1B,MAAMC,IAAI,GAAGD,QAAQ,CAACE,KAAK,CAACC,IAAI;IAChC,MAAMC,OAAO,GAAGJ,QAAQ,CAACE,KAAK,CAACE,OAAO;IACtC,MAAMC,KAAK,GAAG,EAAE;IAChB,MAAMC,cAAc,GAAG,IAAIZ,cAAc,CAACO,IAAI,EAAEG,OAAO,EAAEC,KAAK,CAAC;IAC/D,IAAI,CAACP,WAAW,CAACC,WAAW,CAACO,cAAc,CAAC,CAACC,SAAS,CAAC,MAAK;MAC1DP,QAAQ,CAACQ,QAAQ,CAAC,SAAS,CAAC,CAACC,KAAK,EAAE;IACtC,CAAC,CAAC;EACJ;EAEAC,QAAQ;IACN,IAAI,CAACZ,WAAW,CAACa,sBAAsB,CAAC,IAAI,CAAC,CAACJ,SAAS,CAAEK,QAAQ,IAAI;MACnE,IAAI,CAACC,YAAY,GAAGD,QAAQ;IAC9B,CAAC,CAAC;EACJ;EAEAE,WAAW;IACT;EAAA;EAGFC,cAAc,CAACC,KAAU;IACvBC,UAAU,CAAC,MAAK;MACd,IAAI,CAACC,YAAY,GAAGF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MACzCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAACJ,YAAY,CAAC;IAClD,CAAC,EAAE,GAAG,CAAC;EACT;;AAhCWtB,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCV1BhC,8BAAQ;MAG+BA,sBAAM;MAAAA,iBAAI;MAC3CA,iCACiF;MAC/EA,0BAAyC;MAC3CA,iBAAS;MACTA,8BAAqD;MAGPA,sBAAK;MAAAA,iBAAI;MAM3DA,iCAA+B;MACjCA,iBAAS;MACTA,gCAAmB;MAKTA,+DAOK;MACPA,iBAAK;MAGTA,qCAA4D;MAAtDA;QAAAA;QAAA;QAAA,OAAYA,mCAAqB;MAAA,EAAC;MACtCA,gCAA2B;MAEvBA,6BAA4E;MAC9EA,iBAAM;MACNA,gCAAmB;MACjBA,6BAAkF;MACpFA,iBAAM;MACNA,gCAAmB;MAC6BA,qBAAI;MAAAA,iBAAS;;;MApBPA,gBAAe;MAAfA,0CAAe","names":["ChatMessageDto","i0","ChatComponent","constructor","chatService","sendMessage","sendForm","name","value","user","message","photo","chatMessageDto","subscribe","controls","reset","ngOnInit","getChatMessagesPolling","messages","chatMessages","ngOnDestroy","onFileSelected","event","setTimeout","selectedFile","target","files","console","log","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\studia\\chatFE\\chatApp\\src\\app\\chat\\chat.component.ts","E:\\studia\\chatFE\\chatApp\\src\\app\\chat\\chat.component.html"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {NgForm} from \"@angular/forms\";\r\nimport {ChatService} from \"../services/chat-service\";\r\nimport {ChatMessageDto} from \"../models/chatMessageDto\";\r\n\r\n@Component({\r\n  selector: 'cf-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.css']\r\n})\r\nexport class ChatComponent implements OnInit, OnDestroy{\r\n\r\n  chatMessages: ChatMessageDto[] = [];\r\n  selectedFile: File | null = null;\r\n\r\n  constructor(private chatService: ChatService) {}\r\n\r\n  sendMessage(sendForm: NgForm) {\r\n    const name = sendForm.value.user;\r\n    const message = sendForm.value.message;\r\n    const photo = '';\r\n    const chatMessageDto = new ChatMessageDto(name, message, photo);\r\n    this.chatService.sendMessage(chatMessageDto).subscribe(() => {\r\n      sendForm.controls['message'].reset();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.chatService.getChatMessagesPolling(5000).subscribe((messages) => {\r\n      this.chatMessages = messages;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    // No need to close anything for REST API communication\r\n  }\r\n\r\n  onFileSelected(event: any) {\r\n    setTimeout(() => {\r\n      this.selectedFile = event.target.files[0];\r\n      console.log(\"File selected:\", this.selectedFile);\r\n    }, 500);\r\n  }\r\n}\r\n","<header>\r\n  <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n    <div class=\"container-fluid\">\r\n      <a class=\"navbar-brand\" href=\"#\">My App</a>\r\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"\r\n        aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <ul class=\"navbar-nav\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/login\">Login</a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n  <router-outlet></router-outlet>\r\n</header>\r\n<main class=\"chat\">\r\n  <div class=\"container\">\r\n    <div class=\"chat-content\">\r\n      <div class=\"card\">\r\n        <ul class=\"list-group list-group-flush\" #messageList>\r\n          <li class=\"list-group-item\" *ngFor=\"let chatMessage of chatMessages\">\r\n            <strong>\r\n              {{chatMessage.name}}:\r\n            </strong>\r\n            <span>\r\n              {{chatMessage.message}}\r\n            </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <form (ngSubmit)=\"sendMessage(sendForm)\" #sendForm=\"ngForm\">\r\n      <div class=\"chat-send row\">\r\n        <div class=\"col-2\">\r\n          <input type=\"text\" class=\"form-control\" name=\"user\" id=\"input-user\" ngModel>\r\n        </div>\r\n        <div class=\"col-8\">\r\n          <input type=\"text\" class=\"form-control\" name=\"message\" id=\"input-message\" ngModel>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <button type=\"submit\" class=\"btn btn-primary\">Send</button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</main>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}